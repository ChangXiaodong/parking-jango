## 初始节点设置

1. 单片机内new字段设为True，说明设备为第一次开机。第一次开机时，主动连接中继。（中继地址固定，节点不知道中继的频率，看是否有必要扫频）。如果new为True，节点连上中继以后，中继到服务器上根据该节点的device_id， 把该节点的中继编号填为自己的编号。服务器上的初始参数需要跟传感器中的初始参数保持一致，刚开机不做参数更新。一半初始参数就可以用。

   ## 节点配置方法

2. 数据库中新建一个改变配置的操作表，每次需要改变配置时，查找这个表。

   - 在服务器端改变配置时，根据节点编号在Configure中提取出当前的传感器配置，等新的配置改变后与当前配置做对比，把改变的操作生成log插入到configure_log里面。
   - 中继定时会向服务器发送查询包，在log中如果发现跟自己相关的就读取出来，发送给节点。如果配置成功，把log中的finished位置1，并更新configure中的配置

   ## 数据上传方式

1.节点主动上传到中继

   当数据数量够100，将数据进行一次运算，将中心点等参数上传。

2.节点被动上传到中继（一半情况采取被动上传方式）

中继主动给节点发送上传包，传感器接到上传指令后对数据进行一次运算，将features传到中继上，中继上传至服务器。



   ​